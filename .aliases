# Set personal aliases, overriding those provided by oh-my-zsh libs,
# plugins, and themes. Aliases can be placed here, though oh-my-zsh
# users are encouraged to define aliases within the ZSH_CUSTOM folder.
# For a full list of active aliases, run `alias`.
#

# alias junk
alias ls='ls -G'
alias l='ls -lha'
alias ..='cd ../'

# pretty grep
alias grep="grep --colour=auto"
alias caltoday="calendar -A 0 -f /usr/share/calendar/calendar.world | cut -f2"

# Git aliases
alias ga='git add'
alias gs='git status'
alias gc='git commit -v' # add all changes (only already added files)
alias gco='git checkout'
alias gb='git branch'
alias gl='git log --pretty=format:"%h %s" -n 5'
alias gd='git diff'
alias gds='git diff --staged'
alias gt='git tag'
alias ggraph='git log --graph --oneline --decorate --all'
alias gpush='git push'
alias gamend='git commit -v --amend'
alias gfixlast='git commit --amend --no-edit'
alias gpull='git pull'
alias gll='git --no-pager log --oneline -n 5'
alias gcm='git checkout master'
alias gcb='git checkout -b'

# Vagrant aliases
alias vup='vagrant up'
alias vssh='vagrant ssh'
alias vpro='vagrant provision'
alias vdown='vagrant halt'
alias vlist='vagrant snapshot list'
alias vsave='vagrant snapshot save'
alias vdestroy='vagrant destroy'
alias vrestore='vagrant snapshot restore'
alias vstate='vagrant global-status'

# Sublime
alias subln='subl -n'
alias sublh='subl -n .'

# k8s
alias klogs='kubectl logs'

# python stuff, want to default to py3
alias python='python3'
alias pip='pip3'
alias venv='python -m venv'
alias ipython='source ~/venvs/ipython/ipython/bin/activate; ~/venvs/ipython/ipython/bin/ipython'
alias jupyter='source ~/venvs/ipython/ipython/bin/activate; ~/venvs/ipython/ipython/bin/jupyter'
alias ansible='source ~/venvs/ansible/ansible/bin/activate; ~/venvs/ansible/ansible/bin/ansible'

function update_repos(){
    for CODE_DIR in ~/code/* ; do
        if [ -d "${CODE_DIR}/.git" ]; then
            (
              echo "hello! ${CODE_DIR}"
              cd "${CODE_DIR}" || exit
              git stash save "update_repos save -- $(date)"
              git checkout master
              git pull
              echo -e "*****\n"
            )
        fi
    done
}

export TZ_I_CARE_ABOUT=(America/Chicago America/Sao_Paulo Europe/London Australia/Sydney)
function now(){
    for t in "${TZ_I_CARE_ABOUT[@]}"; do
        TZ=$t date
    done
}

function b64d(){
  if [ -t 0 ]; then
    msg=$*
  else
    msg=$(cat)
  fi
  echo -n "${msg}" | base64 -D
}

function b64e(){
	if [ -t 0 ]; then
		msg=$*
	else
		msg=$(cat)
	fi
  echo -n "${msg}" | base64
}

function ec2(){
	query="Name=tag:Name,Values=*${1}*"
	aws ec2 describe-instances --filter "${query}" |  jq 'if (.Reservations | length ) > 1 or (.Reservations[0].Instances | length ) > 1 then .Reservations[].Instances[] | {"ip":.PrivateIpAddress, "name": .Tags | map(select(.Key=="Name").Value)[0]} else .Reservations[0].Instances[0].PrivateIpAddress end' -cr
}
